<?xml version="1.0"?>

<!-- Alarm on Autothrottle :

     - altitude acquired without autothrottle.
     - glide or autoland without autothrottle.
     - airspeed indicator out of order.
     - no voltage.
     - flashes on test.
 -->

<PropertyList>
 <name>Alarm Autothrottle</name>
 <w-base>60</w-base>
 <h-base>120</h-base>

 <params>
  <test>/controls/autoflight/autopilot[0]/test-land</test>
  <serviceable-sel>/systems/autothrottle/serviceable[0]</serviceable-sel>
 </params>


 <layers>
<!-- translucent lens -->  
  <layer>
    <name>Alarm light</name>
    <type>switch</type>

    <layer>
     <name>on</name>
     <type>group</type>
     <condition>
      <and>
       <not include="concorde-cond-voltage-bulb.xml"/>
       <or>
        <and>
         <property alias="../../../../../../../../params/test"/>
         <not include="concorde-cond-flashing-light.xml"/>
        </and>
        <and>
         <not include="concorde-cond-flashing-light.xml"/>
         <or>
          <not>
           <property alias="../../../../../../../../../../params/serviceable-sel"/>
          </not>
          <and include="concorde-cond-altitude.xml">
           <equals>
            <property>/autopilot/locks/speed</property>
            <value></value>
           </equals>
          </and>
          <and>
           <equals>
            <property>/autopilot/locks/altitude</property>
            <value>gs1-hold</value>
           </equals>
           <equals>
            <property>/autopilot/locks/speed</property>
            <value></value>
           </equals>
          </and>
          <and>
           <or include="concorde-cond-land.xml"/>       <!-- bug -->
           <greater-than>
            <property>/position/altitude-agl-ft</property>
            <value>14</value> <!-- autoland stops below -->
           </greater-than>
           <equals>
            <property>/controls/autoflight/speed</property>
            <value></value>
           </equals>
          </and>
          <and>
           <not>
            <property>/instrumentation/airspeed-indicator[0]/serviceable</property>
           </not>
           <not-equals>
            <property>/autopilot/locks/speed</property>
            <value></value>
           </not-equals>
          </and>
         </or>
        </and>
        <not include="concorde-cond-voltage-autopilot.xml"/>
       </or>
      </and>
     </condition>

     <layer include="concorde-bulb-on.xml">
      <w>60</w>
      <h>120</h>
     </layer>
     <layer>
      <name>background on</name>
      <texture>
       <path>Aircraft/Concorde/Panels/Instruments/Textures/concorde-red-at.rgb</path>
        <x1>0.2</x1>
        <y1>0.0</y1>
        <x2>0.8</x2>
        <y2>1.0</y2>
      </texture>
      <w>60</w>
      <h>120</h>
      <emissive>true</emissive>
     </layer>
    </layer>

    <layer>
     <name>off</name>
     <type>group</type>
 
     <layer include="concorde-bulb-off.xml">
      <w>60</w>
      <h>120</h>
     </layer>
     <layer>
      <name>background off</name>
      <texture>
       <path>Aircraft/Concorde/Panels/Instruments/Textures/concorde-red-at.rgb</path>
        <x1>0.2</x1>
        <y1>0.0</y1>
        <x2>0.8</x2>
        <y2>1.0</y2>
      </texture>
      <w>60</w>
      <h>120</h>
     </layer>
    </layer>
  </layer>

 </layers>

</PropertyList>
